# ğŸ“§ SystÃ¨me d'Emails Automatiques - Guide d'Utilisation

## âœ… Installation TerminÃ©e!

Le systÃ¨me d'envoi d'emails automatiques est maintenant configurÃ© et actif!

## ğŸ¯ Comment Ã§a Fonctionne?

### Envoi Automatique
- **Quand?** Chaque jour Ã  **8h00 du matin**
- **Qui?** Tous les joueurs qui ont un match **le jour mÃªme**
- **Quoi?** Un email de rappel avec toutes les infos du match

### Contenu de l'Email
Les joueurs reÃ§oivent un email HTML professionnel avec:
- ğŸ“… Date du match
- â° Heure de dÃ©but et fin
- ğŸ“ Lieu (stade et ville)
- âš½ Type de match (5v5, 7v7, etc.)
- ğŸ‘¤ Nom de l'organisateur

## ğŸ§ª Tester le SystÃ¨me

### Option 1: CrÃ©er un Match pour Aujourd'hui
1. CrÃ©ez un match avec la date d'aujourd'hui
2. Ajoutez des participants
3. Attendez 8h00 demain OU utilisez l'endpoint de test

### Option 2: Endpoint de Test (RecommandÃ©)
Pour tester immÃ©diatement sans attendre 8h00:

**URL:** `GET http://127.0.0.1:8001/test-email-reminder`

**Exemple avec curl:**
```bash
curl http://127.0.0.1:8001/test-email-reminder
```

**Exemple avec le navigateur:**
Ouvrez simplement: http://127.0.0.1:8001/test-email-reminder

Cet endpoint enverra immÃ©diatement les emails pour tous les matchs d'aujourd'hui.

## ğŸ“‹ VÃ©rifier que Ã§a Fonctionne

### Dans les Logs du Serveur
Vous verrez des messages comme:
```
ğŸ”” VÃ©rification des matchs du jour...
ğŸ“… 2 match(s) trouvÃ©(s) pour aujourd'hui
âš½ Traitement du match: Match de Football 5v5
ğŸ“§ Envoi de 10 email(s) pour 'Match de Football 5v5'
âœ… Email envoyÃ© Ã  player1@example.com pour le match 'Match de Football 5v5'
âœ… Email envoyÃ© Ã  player2@example.com pour le match 'Match de Football 5v5'
ğŸ“§ 10/10 emails envoyÃ©s avec succÃ¨s
```

### Dans la BoÃ®te Email
Les joueurs recevront un email de:
- **ExpÃ©diteur:** Mazelet Blasa <oussemainstagram@gmail.com>
- **Sujet:** âš½ Rappel: Match aujourd'hui - [Titre du Match]

## âš™ï¸ Configuration

### Fichier .env
Les identifiants sont dÃ©jÃ  configurÃ©s dans `apis/.env`:
```
GMAIL_USER=oussemainstagram@gmail.com
GMAIL_APP_PASSWORD=fdei mfzh wptu loep
```

### Modifier l'Heure d'Envoi
Si vous voulez changer l'heure d'envoi (actuellement 8h00):

1. Ouvrir `apis/app/services/match_reminder_scheduler.py`
2. Modifier la ligne:
```python
self.scheduler.add_job(
    self.send_daily_reminders,
    'cron',
    hour=8,  # â† Changer cette valeur (0-23)
    minute=0,
    ...
)
```

## ğŸ”§ DÃ©pannage

### Les Emails ne Sont Pas EnvoyÃ©s?

1. **VÃ©rifier les logs du serveur** - Y a-t-il des erreurs?

2. **VÃ©rifier que le serveur est dÃ©marrÃ©**
   ```bash
   uvicorn app.main:app --port 8001 --reload
   ```

3. **VÃ©rifier le fichier .env**
   - Le fichier existe dans `apis/.env`?
   - Les identifiants sont corrects?

4. **Tester manuellement**
   - Utilisez l'endpoint de test: http://127.0.0.1:8001/test-email-reminder

### Les Emails Vont dans les Spams?

C'est rare avec Gmail, mais si Ã§a arrive:
- Demandez aux joueurs de marquer comme "Non spam"
- Ajoutez oussemainstagram@gmail.com dans leurs contacts

### Erreur "Authentication Failed"?

VÃ©rifiez que:
- Le App Password est correct (pas le mot de passe Gmail normal)
- Il n'y a pas d'espaces en trop dans le .env

## ğŸ“Š Limites

- **500 emails/jour** avec Gmail gratuit
- Largement suffisant pour votre plateforme!

## ğŸ‰ C'est Tout!

Le systÃ¨me fonctionne automatiquement. Vous n'avez rien Ã  faire!

Chaque matin Ã  8h00, tous les joueurs avec un match le jour mÃªme recevront automatiquement leur rappel.

---

**Besoin d'aide?** VÃ©rifiez les logs du serveur pour voir ce qui se passe.
